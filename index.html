<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>House of Techno - 4th July @ The Balloon, Bedford</title>
  
  <!-- Google Ads Conversion Tracking -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=AW-17169773165"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() {
      dataLayer.push(arguments);
    }
    gtag('js', new Date());
    gtag('config', 'AW-17169773165');
  </script>
  
  <!-- Event snippet for Get directions conversion page -->
  <script>
    gtag('event', 'conversion', {'send_to': 'AW-17169773165/ohY_CLSr0dUaEO3kl_s_'});
  </script>
  
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    @keyframes spin-slow {
      from {
        transform: rotate(0deg);
      }

      to {
        transform: rotate(360deg);
      }
    }

    @keyframes spin-reverse {
      from {
        transform: rotate(360deg);
      }

      to {
        transform: rotate(0deg);
      }
    }

    @keyframes wave {

      0%,
      100% {
        transform: scaleY(1);
      }

      50% {
        transform: scaleY(2);
      }
    }

    @keyframes glow {

      0%,
      100% {
        filter: drop-shadow(0 0 20px rgba(236, 72, 153, 0.3));
      }

      50% {
        filter: drop-shadow(0 0 40px rgba(236, 72, 153, 0.6));
      }
    }

    @keyframes beat {

      0%,
      100% {
        transform: scale(1);
        opacity: 1;
      }

      50% {
        transform: scale(1.2);
        opacity: 0.7;
      }
    }

    @keyframes pulse-slow {

      0%,
      100% {
        opacity: 0.8;
      }

      50% {
        opacity: 1;
      }
    }

    .animate-spin-slow {
      animation: spin-slow 10s linear infinite;
    }

    .animate-spin-reverse {
      animation: spin-reverse 8s linear infinite;
    }

    .animate-wave {
      animation: wave 1s ease-in-out infinite;
    }

    .animate-glow {
      animation: glow 3s ease-in-out infinite;
    }

    .animate-beat {
      animation: beat 0.5s ease-in-out infinite;
    }

    .animate-pulse-slow {
      animation: pulse-slow 2s ease-in-out infinite;
    }

    /* Count Down to Drop Overlay Styles */
    .countdown-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background: rgba(0, 0, 0, 0.95);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      z-index: 1000;
      opacity: 0;
      animation: fadeInOverlay 0.5s ease-out forwards;
    }

    @keyframes fadeInOverlay {
      0% {
        opacity: 0;
      }

      100% {
        opacity: 1;
      }
    }

    .drop-countdown-text {
      font-size: clamp(1.5rem, 4vw, 3rem);
      font-weight: bold;
      margin-bottom: 30px;
      text-shadow: 0 0 20px rgba(236, 72, 153, 0.8);
      letter-spacing: 2px;
      color: #ec4899;
    }

    .drop-countdown-number {
      font-size: clamp(8rem, 20vw, 20rem);
      font-weight: 900;
      color: #ec4899;
      text-shadow:
        0 0 20px rgba(236, 72, 153, 0.8),
        0 0 40px rgba(236, 72, 153, 0.6),
        0 0 60px rgba(236, 72, 153, 0.4);
      animation: countdownPulse 1s ease-in-out;
      margin: 20px 0;
      line-height: 0.8;
    }

    @keyframes countdownPulse {
      0% {
        transform: scale(0.5);
        opacity: 0;
      }

      50% {
        transform: scale(1.2);
        opacity: 1;
      }

      100% {
        transform: scale(1);
        opacity: 1;
      }
    }

    .drop-beat-bars {
      display: flex;
      justify-content: center;
      gap: 4px;
      margin: 30px 0;
    }

    .drop-bar {
      width: 6px;
      background: linear-gradient(to top, #ec4899, #06b6d4);
      border-radius: 3px;
      animation: beatWave 0.8s ease-in-out infinite;
    }

    .drop-bar:nth-child(1) {
      height: 20px;
      animation-delay: 0s;
    }

    .drop-bar:nth-child(2) {
      height: 40px;
      animation-delay: 0.1s;
    }

    .drop-bar:nth-child(3) {
      height: 60px;
      animation-delay: 0.2s;
    }

    .drop-bar:nth-child(4) {
      height: 80px;
      animation-delay: 0.3s;
    }

    .drop-bar:nth-child(5) {
      height: 60px;
      animation-delay: 0.4s;
    }

    .drop-bar:nth-child(6) {
      height: 40px;
      animation-delay: 0.5s;
    }

    .drop-bar:nth-child(7) {
      height: 20px;
      animation-delay: 0.6s;
    }

    @keyframes beatWave {

      0%,
      100% {
        transform: scaleY(1);
        opacity: 0.6;
      }

      50% {
        transform: scaleY(1.5);
        opacity: 1;
      }
    }

    /* Flash effect for the drop */
    .flash-effect {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background: rgba(255, 255, 255, 0.9);
      z-index: 1100;
      opacity: 0;
      animation: flashEffect 0.5s ease-out;
    }

    @keyframes flashEffect {
      0% {
        opacity: 0;
      }

      50% {
        opacity: 1;
      }

      100% {
        opacity: 0;
      }
    }

    /* Explode transition */
    .explode {
      animation: explode 1s ease-out forwards;
    }

    @keyframes explode {
      0% {
        transform: scale(1);
        opacity: 1;
      }

      100% {
        transform: scale(20);
        opacity: 0;
      }
    }

    /* Instant redirect overlay */
    .instant-redirect {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background: rgba(0, 0, 0, 0.95);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      z-index: 1000;
    }

    .spinner {
      width: 60px;
      height: 60px;
      border: 4px solid rgba(236, 72, 153, 0.3);
      border-top: 4px solid #ec4899;
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      0% {
        transform: rotate(0deg);
      }

      100% {
        transform: rotate(360deg);
      }
    }

    .redirect-text {
      margin-top: 20px;
      font-size: 1.2rem;
      color: #ec4899;
      text-align: center;
    }
  </style>
</head>

<body class="bg-black text-white min-h-screen">
  <!-- Instant redirect overlay (hidden by default) -->
  <div id="instantRedirect" class="instant-redirect" style="display: none;">
    <div class="spinner"></div>
    <div class="redirect-text">Welcome back! Entering the underground...</div>
  </div>

  <!-- Count down to drop overlay (hidden by default) -->
  <div id="countdownOverlay" class="countdown-overlay" style="display: none;">
    <div class="drop-countdown-text">Count Down to the Drop</div>

    <div id="dropCountdownNumber" class="drop-countdown-number">3</div>

    <div class="drop-beat-bars">
      <div class="drop-bar"></div>
      <div class="drop-bar"></div>
      <div class="drop-bar"></div>
      <div class="drop-bar"></div>
      <div class="drop-bar"></div>
      <div class="drop-bar"></div>
      <div class="drop-bar"></div>
    </div>
  </div>

  <!-- Flash effect overlay -->
  <div id="flashEffect" class="flash-effect" style="display: none;"></div>

  <!-- Original main page content -->
  <div class="min-h-screen flex flex-col items-center justify-center p-8">
    <!-- HoT Logo -->
    <div class="mb-12 relative">
      <!-- Animated background circles -->
      <div class="absolute inset-0 flex items-center justify-center">
        <div class="w-64 h-64 md:w-80 md:h-80 border border-cyan-500/20 rounded-full animate-spin-slow"></div>
        <div class="absolute w-48 h-48 md:w-60 md:h-60 border border-pink-500/30 rounded-full animate-spin-reverse">
        </div>
        <div class="absolute w-32 h-32 md:w-40 md:h-40 border border-orange-500/40 rounded-full animate-pulse"></div>
      </div>

      <!-- Waveform graphics -->
      <div class="absolute -left-20 top-1/2 transform -translate-y-1/2 hidden md:block">
        <div class="flex items-end space-x-1" id="leftWaveform">
          <!-- Waveform bars will be generated by JavaScript -->
        </div>
      </div>

      <div class="absolute -right-20 top-1/2 transform -translate-y-1/2 hidden md:block">
        <div class="flex items-end space-x-1" id="rightWaveform">
          <!-- Waveform bars will be generated by JavaScript -->
        </div>
      </div>

      <!-- Main logo -->
      <div class="relative z-10 text-center">
        <div class="animate-glow">
          <img src="hot_1.png" alt="House of Techno Logo" class="w-48 h-48 md:w-64 md:h-64 mx-auto animate-pulse-slow"
            onerror="this.style.display='none'; document.getElementById('fallback-logo').style.display='block';" />
          <!-- Fallback text logo -->
          <div id="fallback-logo" style="display: none;"
            class="w-48 h-48 md:w-64 md:h-64 mx-auto flex items-center justify-center">
            <div class="text-6xl md:text-8xl font-black">
              <span class="text-pink-500">H</span>
              <span class="text-pink-500">o</span>
              <span class="text-pink-500">T</span>
            </div>
          </div>
        </div>

        <!-- Beat indicator -->
        <div class="mt-6 flex justify-center">
          <div class="w-3 h-3 bg-pink-500 rounded-full animate-beat"></div>
        </div>
      </div>
    </div>

    <!-- Sub text -->
    <div class="text-2xl md:text-4xl font-light mb-16 text-center">HoT @ The Ballon!</div>
    <div class="text-sm text-gray-500 font-mono" id="address">Foster Hill Road, Bedford</div>
    <!-- Countdown -->
    <div class="text-center space-y-6 max-w-md w-full">
      <div class="text-xl md:text-2xl font-mono" id="beats-countdown">Loading...</div>
      <!-- <div class="text-lg md:text-xl font-mono text-gray-400" id="bars-countdown">Loading...</div> -->

      <!-- Progress Bar -->
      <div class="w-full bg-gray-800 rounded-full h-2 mt-8">
        <div id="progress-bar" class="bg-red-500 h-2 rounded-full transition-all duration-1000 ease-out"
          style="width: 0%" />
      </div>
      <div class="text-sm text-gray-500 font-mono" id="progress-percent">0.0% complete</div>
    </div>

    <!-- Target Date -->
    <div class="mt-16 text-center text-gray-500 text-sm">Friday, July 4th, 2025 • 18:00 UTC</div>
  </div>

  <script>
    // Cookie management
    function setCookie(name, value, days) {
      const expires = new Date();
      expires.setTime(expires.getTime() + (days * 24 * 60 * 60 * 1000));
      document.cookie = `${name}=${value};expires=${expires.toUTCString()};path=/`;
    }

    function getCookie(name) {
      const nameEQ = name + "=";
      const ca = document.cookie.split(';');
      for (let i = 0; i < ca.length; i++) {
        let c = ca[i];
        while (c.charAt(0) === ' ') c = c.substring(1, c.length);
        if (c.indexOf(nameEQ) === 0) return c.substring(nameEQ.length, c.length);
      }
      return null;
    }

    // Check if user should be redirected immediately
    function checkVisitCount() {
      let visitCount = parseInt(getCookie('hotVisitCount') || '0');
      visitCount++;
      setCookie('hotVisitCount', visitCount.toString(), 30); // Store for 30 days

      if (visitCount >= 3) {
        // Show instant redirect overlay
        document.getElementById('instantRedirect').style.display = 'flex';

        // Redirect immediately for returning users
        setTimeout(() => {
          window.location.href = './v1/index.html';
        }, 1000);

        return true;
      }

      return false;
    }

    // "Count down to the drop" functionality
    function startDropCountdown() {
      const overlay = document.getElementById('countdownOverlay');
      const countdownElement = document.getElementById('dropCountdownNumber');

      // Show the countdown overlay
      overlay.style.display = 'flex';

      let count = 3;

      const countdown = setInterval(() => {
        if (count > 0) {
          countdownElement.textContent = count;
          countdownElement.style.animation = 'none';

          // Trigger animation
          setTimeout(() => {
            countdownElement.style.animation = 'countdownPulse 1s ease-in-out';
          }, 10);

          count--;
        } else {
          clearInterval(countdown);

          // THE DROP!
          countdownElement.textContent = 'DROP!';
          countdownElement.style.color = '#06b6d4';
          countdownElement.style.animation = 'countdownPulse 0.5s ease-in-out';

          // Flash effect
          const flash = document.getElementById('flashEffect');
          flash.style.display = 'block';

          setTimeout(() => {
            flash.style.display = 'none';

            // Start transition
            overlay.classList.add('explode');

            // Navigate to main site
            setTimeout(() => {
              window.location.href = './v1/index.html';
            }, 1000);

          }, 500);
        }
      }, 1000);
    }

    // Original countdown logic for the main page
    const BPM = 132;
    const BEATS_PER_BAR = 4;
    const TARGET = new Date("2025-07-04T18:00:00Z").getTime();
    const START = new Date("2025-05-27T00:00:00Z").getTime();

    function updateCountdown() {
      const now = Date.now();
      const diffMs = TARGET - now;
      const totalMinutes = diffMs / 60000;
      const totalBeats = Math.max(0, Math.floor(BPM * totalMinutes));
      const totalBars = Math.floor(totalBeats / BEATS_PER_BAR);

      const totalDurationMs = TARGET - START;
      const percent = 100 - (diffMs / totalDurationMs) * 100;
      const progress = Math.min(100, Math.max(0, percent));

      // Update DOM elements
      document.getElementById('beats-countdown').textContent = totalBeats.toLocaleString() + ' beats to go';
      // document.getElementById('bars-countdown').textContent = totalBars.toLocaleString() + ' bars @132 BPM';
      document.getElementById('progress-bar').style.width = progress + '%';
      document.getElementById('progress-percent').textContent = progress.toFixed(1) + '% complete';
    }

    // Generate waveform bars
    function createWaveform(containerId, colorClass) {
      const container = document.getElementById(containerId);
      for (let i = 0; i < 8; i++) {
        const bar = document.createElement('div');
        bar.className = `w-1 ${colorClass} animate-wave`;
        bar.style.height = (Math.random() * 40 + 10) + 'px';
        bar.style.animationDelay = (i * 0.1) + 's';
        container.appendChild(bar);
      }
    }

    // Initialize page
    window.addEventListener('load', () => {
      // Generate waveforms
      createWaveform('leftWaveform', 'bg-cyan-500');
      createWaveform('rightWaveform', 'bg-pink-500');

      // Start original countdown
      updateCountdown();
      setInterval(updateCountdown, 1000);

      // Check visit count and handle accordingly
      if (!checkVisitCount()) {
        // New user or hasn't visited 3 times yet - show drop countdown after a brief moment
        setTimeout(() => {
          startDropCountdown();
        }, 2000); // Show original page for 2 seconds, then start drop countdown
      }
    });

    // Add interactive effects
    document.addEventListener('click', (e) => {
      // Don't trigger on overlay clicks
      if (e.target.closest('.countdown-overlay') || e.target.closest('.instant-redirect')) {
        return;
      }

      // Add some interactive sparkle effect to circles
      const circles = document.querySelectorAll('.animate-spin-slow, .animate-spin-reverse');
      circles.forEach(circle => {
        circle.style.animationDuration = '2s';
        setTimeout(() => {
          circle.style.animationDuration = '';
        }, 2000);
      });
    });
  </script>
</body>

</html>